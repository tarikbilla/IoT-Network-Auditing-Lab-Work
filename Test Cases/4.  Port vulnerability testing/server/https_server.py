from flask import Flask, request, Response
import ssl

app = Flask(__name__)

USERNAME = 'tarik'
PASSWORD = 'tarik'

def check_auth(username, password):
    return username == USERNAME and password == PASSWORD

def authenticate():
    return Response(
        'Unauthorized', 401,
        {'WWW-Authenticate': 'Basic realm="Login Required"'}
    )

@app.route('/', methods=['GET', 'POST'])
def index():
    auth = request.authorization
    if not auth or not check_auth(auth.username, auth.password):
        return authenticate()
    return "<h1>Login Successful</h1><p>Welcome to the secure server.</p>"


if __name__ == "__main__":
    context = ssl.SSLContext(ssl.PROTOCOL_TLS_SERVER)
    context.load_cert_chain('cert.pem', 'key.pem')
    app.run(host='0.0.0.0', port=443, ssl_context=context)
